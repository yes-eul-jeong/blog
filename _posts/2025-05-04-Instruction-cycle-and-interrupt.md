---
layout: post
title: "명령어 사이클과 인터럽트"
date: 2025-05-04 15:45:15 +0900
tags: [ study, CS ]
categories: []
---


<br/>
<br/>


# 명령어 사이클과 인터럽트

<br/>
<br/>

## CPU명령어 사이클(Instruction Cycle)

- CPU는 명령어를 처리하는 기본 흐름(명령어 사이클)을 반복함.
- 명령어 사이클에는 두가지 종류가 있음
    - 인출 사이클(Fetch Cycle) : 메모리에서 명령어를 가져오는 단계.
    - 실행 사이클(Execute Cycle): 명령어를 실행하는 단계

<br/>

> ####  명령어 사이클의 기본 흐름
> **1️⃣ 인출 (Fetch): 메모리에서 명령어를 읽어옴.**<br/>
> **2️⃣ 해독 (Decode): CPU가 명령어를 해석.**<br/>
> **3️⃣ 실행 (Execute): 해석된 명령어를 실행.**<br/>
> **4️⃣ 저장 (Store): 실행 결과를 메모리에 저장.**<br/>

<br/>

## 간접 사이클 (Indirect Cycle)
- 명령어가 메모리주소(포인터)를 참조하는 경우, 해당 주소에서 실제 값을 다시 가져와야함.
- ex: `LOAD [1000]` (1000번지에 저장된 주소를 다시 참조)
- 이처럼 메모리를 한 번 더 읽어야 하는 경우가 간접 사이클

<br/>
<br/>


## 인터럽트(Interrupt)
- CPU의 기본 명령어 사이클을 일시적으로 중단하고 다른 중요한 작업을 처리할 수 있게 해주는 메커니즘. 
- CPU가 잠깐!급한 일이 생겼어! 하고 작업을 중단하는것

<br/>

#### 인터럽트의 주요 목적!
- CPU의 유휴 시간 줄이기 : 입출력(I/O) 대기 중 다른 작업을 처리할 수 있게 함.
- 중요한 작업 우선 처리 : 중요한 하드웨어나 시스템 문제가 발생하면 즉시 처리 가능.

<br/>
<br/>
<br/>

## 인터럽트의 종류

<br/>

### 동기 (Synchronous) 인터럽트
- CPU의 명령어 실행 중 발생.
- ex : 0으로 나누기 (Division by Zero), 잘못된 메모리 접근 (Segmentation Fault).
- CPU가 예상할 수 있는 시점에 발생 (명령어 실행 중)
<br/>
<br/>

### 비동기 (Asynchrous) 인터럽트
- 외부 장치에 의해 발생
- ex: 키보드 입력, 마우스 클릭, 타이머 신호, I/O 완료.
- CPU가 예상할 수 없는 시점에 발생(외부 이벤트).

<br/>
<br/>
<br/>

## 인터럽트 처리 과정
#### 1. 인터럽트 발생
- 입출력 장치나 하드웨어가 CPU에 인터럽트 요청 신호(IRQ) 를보냄.

#### 2. 인터럽트 확인 :
- CPU는 현재 명령어 사이클이 끝날 때마다 인터럽트 요청을 확인함.
이 확인 작업은 인터럽트 플래그로 제어됨.

#### 3. 인터럽트 승인 :
- CPU는 현재 작업 상태를 저장 (백업).
- 이 상태 저장은 레지스터 값과 프로그램 카운터(PC) 저장으로 이루어짐.

#### 4. 인터럽트 벡터 참조 : 
- CPU는 인터럽트 벡터 테이블(Interrupt Vector Table)을 확인.
- 여기에는 각 인터럽트 서비스 루틴(ISR)의 시작 주소가 저장됨.

#### 5. 인터럽트 서비스 루틴(IRS) 실행:
- CPU는 지정된 ISR을 실행하여 인터럽트 처리.
- ex: 프린터 완료 → 완료 알림 처리, 키보드 입력 → 입력 처리.

#### 6. 작업 복구 :
- ISR 실행이 끝나면, 저장된 CPU 상태를 복구하여 원래 작업을 재개.

<br/>
<br/>
<br/>

## 인터럽트 처리의 핵심 요소
<br/>

### 인터럽트 요청 신호 (IRQ - Interrupt Request)
- 외부 장치(I/O)나 시스템에서 발생하는 인터럽트 요청.
- 예: 키보드, 마우스, 프린터, 하드디스크 등에서 발생할 수 있음.

### 인터럽트 플래그 (Interrupt Flag)
- CPU가 인터럽트를 받아들일 수 있는 상태인지 확인하는 플래그.
- 인터럽트가 발생해도, CPU가 허용하지 않으면 무시될 수 있음.

### NMI (Non-Maskable Interrupt)
- 마스크할 수 없는 인터럽트.
- 즉, CPU가 무조건 처리해야 하는 중요한 인터럽트.
- 예: 하드웨어 오류, 시스템 고장, 정전 알림.

### 인터럽트 벡터 (Interrupt Vector)
- 각 인터럽트의 ISR(인터럽트 서비스 루틴) 시작 주소가 저장된 테이블.
- CPU는 인터럽트가 발생하면, 벡터 테이블을 참조하여 ISR 실행.
